<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}" data-theme="light">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff">

    <title>{% if page.title %}{{ page.title | escape }} | {% endif %}{{ site.title | escape }}</title>
    <meta name="description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">

    <!-- Styles -->
    <link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}">
    <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">

    <!-- Preload theme script to prevent flash -->
    <script>
      (function() {
        const theme = localStorage.getItem('automation-exercises-theme') ||
                     (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>

    {% feed_meta %}
    {% seo %}
  </head>

  <body>
    <header class="site-header" role="banner">
      <div class="wrapper">
        <nav class="site-nav">
          <a class="site-title" rel="author" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>

          <div class="nav-links">
            <a class="page-link" href="{{ "/" | relative_url }}">Home</a>
            <a class="page-link" href="{{ "/exercises/" | relative_url }}">Exercises</a>
            <a class="page-link" href="{{ "/guides/setup/" | relative_url }}">Setup</a>
            <a class="page-link" href="https://github.com/louischancly/automation-exercises" target="_blank" rel="noopener">GitHub</a>
          </div>
          <!-- Theme toggle will be inserted here by JavaScript -->
        </nav>
      </div>
    </header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>

    <footer class="site-footer">
      <div class="wrapper">
        <p>Â© 2024 {{ site.title }}. Built with Jekyll and hosted on GitHub Pages.</p>
      </div>
    </footer>

    <!-- JavaScript -->
    <script src="{{ "/assets/js/theme.js" | relative_url }}"></script>

    {% if page.layout == "exercise" or page.mermaid %}
      {% include mermaid.html %}
    {% endif %}
  </body>
</html>
